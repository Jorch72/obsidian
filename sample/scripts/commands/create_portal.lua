Command("create portal","","Creates a new portal.",  function(command,player,message)    if message ~= "" then      Message("&eSyntax: "..command.syntax):Send(player)	  return    end    if playerNextBlock[player] then player.BlockEvent:Remove(playerNextBlock[player].handle) end    playerNextBlock[player] = { handle = player.BlockEvent:Add(PortalCreateFirst), name = "Portal creation" }	Message("&ePlace the first portal entrance."):Send(player)  end)function PortalCreateFirst(player,args)  Message("&ePlace the second portal entrance."):Send(player)  player.BlockEvent:Remove(playerNextBlock[player].handle)  playerNextBlock[player] = {    handle = player.BlockEvent:Add(PortalCreateSecond),    name = "Portal creation",    first = args,    rot = math.floor(player.Position.RotX/64+0.5)*64  } args.Abort = trueendfunction PortalCreateSecond(player,second)  local first = playerNextBlock[player].first  local rot = (playerNextBlock[player].rot-math.floor(player.Position.RotX/64+0.5)*64+128) % 256  player.BlockEvent:Remove(playerNextBlock[player].handle)  playerNextBlock[player] = nil  Message("&ePortal created: "..first.X..","..first.Y..","..first.Z..          " <=> "..second.X..","..second.Y..","..second.Z.."."):Send(player)  local portal = Portal(player.Level,first,second)  portal.Orientation = rot  table.insert(levelPortals,portal)  if second.Type ~= 0 then second.Abort = true endend